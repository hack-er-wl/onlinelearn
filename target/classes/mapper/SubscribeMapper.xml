<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.mapper.SubscribeMapper">
    <!-- 插入一个订阅信息 -->
    <insert id="subscribeCourse" parameterType="java.lang.String">
        insert into subscribe(user_id,course_id,order_id) values (#{user_id},#{course_id},#{order_id})
    </insert>
    <!-- 插入一个收藏信息 -->
    <insert id="collectCourse" parameterType="java.lang.String">
        insert into collect(user_id,course_id) values (#{user_id},#{course_id})
    </insert>
    <!-- 插入一个订单信息 -->
    <insert id="insertOrder" parameterType="org.example.entity.Order">
        insert into orders(order_id,order_title,order_fee,create_time,pay_time,pay_status) values (#{order_id},#{order_title},#{order_fee},#{create_time},#{pay_time},#{pay_status})
    </insert>
    <!-- 根据用户id和课程id查询订阅信息 -->
    <select id="querySubscribeCourse" parameterType="java.lang.String" resultType="org.example.entity.SubscribeInfo">
        select * from subscribe where user_id=#{user_id} and course_id=#{course_id}
    </select>
    <!-- 根据用户id和课程id查询收藏信息 -->
    <select id="queryCollectCourse" parameterType="java.lang.String" resultType="org.example.entity.CollectInfo">
        select * from collect where user_id=#{user_id} and course_id=#{course_id}
    </select>
    <!-- 根据用户id查询订单信息 -->
    <select id="queryOrder" parameterType="java.lang.String" resultType="org.example.entity.Order">
        select * from orders where user_id=#{user_id}
    </select>
    <!-- 删除一个订阅信息 -->
    <delete id="cancelSubscribeCourse" parameterType="java.lang.String">
        delete from subscribe where user_id = #{user_id} and course_id = #{course_id}
    </delete>
    <!-- 删除一个收藏信息 -->
    <delete id="cancelCollectCourse" parameterType="java.lang.String">
        delete from collect where user_id = #{user_id} and course_id = #{course_id}
    </delete>
    <!-- 删除一个订单信息 -->
    <delete id="cancelOrder" parameterType="java.lang.String">
        delete from orders where order_id = #{order_id}
    </delete>
</mapper>